<%%- model_class = <%= "#{namespace}::#{model_class}" %> -%>

<%% content_for :header do %>
  <%%= render partial: "layouts/header", locals: {active_tab: model_class} %>
<%% end %>

<%% content_for :content do %>
  <div id="navigation-view">
    <div id="navigation-bar" class="container-fluid">
      <div class="row">
        <%% case @parent.class.name when <%= "#{namespace}::#{parent_model_class}" %>.name %>
          <div class="col-xs-3">
            <h3 style="margin-top: auto;"><%%= @parent.<%= parent_model_name_attribute %>.capitalize %></h3>
          </div>
        <%% else %>
          <div class="col-xs-3">
            <h3 style="margin-top: auto;"><%%= model_class.model_name.human.pluralize.titleize %></h3>
          </div>
        <%% end %>
        <%% case @parent.class.name when <%= "#{namespace}::#{parent_model_class}" %>.name %>
          <div class="col-xs-5">
            <%%= render partial: "<%= "#{namespace}/#{parent_model_class.pluralize}".underscore %>/tab_bar", locals: {active_tab: model_class.model_name.human.pluralize.titleize, <%= parent_model_class.underscore %>: @parent} %>
          </div>
        <%% else %>
        <%% end %>
        <%% case @parent.class.name when <%= "#{namespace}::#{parent_model_class}" %>.name %>
          <div class="col-xs-4">
            <div class="btn-toolbar pull-right" role="toolbar">
              <div class="btn-group">
                <%%= link_to new_<%= "#{namespace}_#{parent_model_class}_#{model_class}".underscore %>_path, class: 'btn', title: "Add <%= model_class.capitalize %>", data: { toggle:"tooltip", placement:"bottom" } do %>
                  <i class="fa fa-plus fa-3x"></i>
                <%% end %>
              </div>
            </div>
          </div>
        <%% else %>
        <%% end %>
      </div>
    </div>
    <div id="custom-view">
      <div class="container-fluid">
        <div class="table-responsive">
          <table class="table table-hover">
            <thead>
              <tr>
                <%- model_attributes.each do |attribute_name| -%>
                <th><%%= model_class.human_attribute_name(:<%= attribute_name %>) %></th>
                <%- end -%>
              </tr>
            </thead>
            <tbody>
              <%% case @parent.class.name when <%= "#{namespace}::#{parent_model_class}" %>.name %>
                <%% <%= "@#{model_instance.pluralize}" %>.each do |<%= model_instance %>| %>
                <tr>
                <%- model_attributes.each do |attribute_name| -%>
                  <td><%%= <%= model_instance %>.<%= attribute_name %> %></td>
                <%- end -%>
                  <td>
                    <%%= link_to <%= "#{namespace}_#{parent_model_class}_#{model_class}".underscore %>_path(<%= model_instance %>, { <%= "#{parent_model_class}_id".underscore %>: @parent }) do %>
                      <i class="fa fa-info-circle fa-lg"></i>
                    <%% end %>
                  </td>
                </tr>
                <%% end %>
              <%% else %>
                <%% <%= "@#{model_instance.pluralize}" %>.each do |<%= model_instance %>| %>
                <tr>
                <%- model_attributes.each do |attribute_name| -%>
                  <td><%%= <%= model_instance %>.<%= attribute_name %> %></td>
                <%- end -%>
                  <td>
                    <%%= link_to 'Delete', <%= model_instance %>, :method => 'delete', class: "btn btn-danger", title: "Delete <%= model_instance %>", data: { toggle:"tooltip", placement:"bottom" }, :data => { :confirm => t('.confirm', :default => t("helpers.links.confirm", :default => 'Are you sure?')) } %>
                  </td>
                </tr>
                <%% end %>
              <%% end %>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
<%% end %>

<%%= render template: "layouts/app" %>
